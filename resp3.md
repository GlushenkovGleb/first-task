# Решение задания №1: Сеть ресторанов

## 1. Введение
Разрабатываемая система автоматизации для сети ресторанов представляет собой комплексное решение, объединяющее управление поставками, складом, меню, CRM, доставкой и маркетингом. Она обеспечивает:
- Контроль запасов продуктов и интеграцию с поставщиками.
- Управление меню и кассовыми операциями.
- CRM с программой лояльности, таргетированными акциями и обратной связью.
- Автоматизацию доставки (назначение курьеров, трекинг заказов).
- Генерацию аналитики для оптимизации бизнес-процессов.

Система соответствует требованиям 3НФ, минимизирует дублирование данных и поддерживает интеграцию с внешними сервисами (например, кассовыми аппаратами).

---

## 2. Основная часть

### 2.1. Описание процессов и информационных потоков
**Ключевые процессы:**
1. **Управление поставками:**
   - Поставщик → Создание заявки на поставку → Проверка остатков на складе → Формирование заказа → Обновление запасов.
   - Данные: наименование продукта, количество, срок годности, поставщик.

2. **Оформление заказа:**
   - Клиент → Выбор блюд → Проверка доступности → Применение акций/баллов → Оплата → Назначение курьера → Доставка.
   - Интеграция с кассой: передача данных о платеже (сумма, метод оплаты, ID транзакции).

3. **Программа лояльности:**
   - Начисление баллов за заказ → Конвертация баллов в скидки → Персональные предложения.

4. **Обратная связь:**
   - Клиент → Оценка заказа → Анализ отзывов → Корректировка меню/сервиса.

**Информационные потоки:**
- **Внутренние:** данные о запасах → меню → заказы → курьеры.
- **Внешние:** интеграция с платежными системами, SMS-уведомления, аналитические отчеты.

---

### 2.2. Инфологическая и даталогическая модели

#### Инфологическая модель (ER-диаграмма, 3НФ):
![ER-диаграмма](https://via.placeholder.com/800x600.png?text=ER-Diagram+3NF)

**Сущности и связи:**
- **Suppliers** (SupplierID PK, Name, Contact)
- **Products** (ProductID PK, Name, ExpiryDate, Quantity)
- **Dishes** (DishID PK, Name, Price, Recipe)
- **Orders** (OrderID PK, ClientID FK, CourierID FK, TotalPrice)
- **Clients** (ClientID PK, Phone, LoyaltyPoints)
- **Couriers** (CourierID PK, Name, Status)
- **Promotions** (PromoID PK, Discount%, Conditions)

**Связи:**
- Поставщик → Продукты (1:M через таблицу Supplies).
- Блюда → Продукты (M:M через DishIngredients).
- Заказ → Блюда (M:M через OrderDishes).

#### Даталогическая модель (физическая схема БД):
```sql
CREATE TABLE Suppliers (
    SupplierID INT PRIMARY KEY,
    Name VARCHAR(100),
    Contact VARCHAR(100)
);

CREATE TABLE Products (
    ProductID INT PRIMARY KEY,
    Name VARCHAR(100),
    ExpiryDate DATE,
    Quantity INT,
    SupplierID INT FOREIGN KEY REFERENCES Suppliers(SupplierID)
);

CREATE TABLE Dishes (
    DishID INT PRIMARY KEY,
    Name VARCHAR(100),
    Price DECIMAL(10,2)
);

CREATE TABLE DishIngredients (
    DishID INT FOREIGN KEY REFERENCES Dishes(DishID),
    ProductID INT FOREIGN KEY REFERENCES Products(ProductID),
    Quantity INT,
    PRIMARY KEY (DishID, ProductID)
);

CREATE TABLE Orders (
    OrderID INT PRIMARY KEY,
    ClientID INT FOREIGN KEY REFERENCES Clients(ClientID),
    CourierID INT FOREIGN KEY REFERENCES Couriers(CourierID),
    OrderDate DATETIME,
    Status VARCHAR(20)
);
```

---

### 2.3. Прототипы веб-страниц
**1. Главная страница клиента:**
- Блок меню с фильтрами (категории, цена).
- Корзина с итоговой суммой и кнопкой "Оформить заказ".
- Баннеры активных акций.

**2. Личный кабинет:**
- История заказов.
- Баланс баллов лояльности.
- Форма для отзыва.

**3. Панель курьера:**
- Список активных заказов с адресами.
- Кнопки "Принять заказ", "Завершить доставку".

**4. Админ-панель:**
- Управление меню (добавление/удаление блюд).
- Аналитика продаж и остатков продуктов.

---

### 2.4. Варианты использования (Use Case)
**Сценарий: Оформление заказа с доставкой**
1. Клиент авторизуется в системе.
2. Выбирает блюда из меню, добавляет в корзину.
3. Применяет промокод или баллы лояльности.
4. Выбирает способ оплаты (онлайн/наличные).
5. Система проверяет доступность продуктов, резервирует их.
6. Назначается свободный курьер.
7. Клиент получает SMS с трек-номером заказа.

**Алгоритм в псевдокоде:**
```
function createOrder(clientID, dishes, promoCode):
    if checkStock(dishes) == false:
        return "Товара нет в наличии"
    total = calculateTotal(dishes)
    if promoCode != null:
        total = applyPromo(total, promoCode)
    orderID = generateOrderID()
    assignCourier(orderID)
    updateStock(dishes)
    sendSMS(clientID, "Заказ №"+orderID+" оформлен")
```

---

## 3. Заключение
Разработанная система удовлетворяет всем требованиям задания:
- Полноценная автоматизация ключевых бизнес-процессов.
- Нормализованная структура БД без избыточности.
- Интуитивный интерфейс для клиентов, курьеров и администраторов.
- Гибкая интеграция с внешними сервисами (платежи, кассы).
- Механизмы для повышения лояльности клиентов и аналитики.

Данное решение позволяет оптимизировать работу сети ресторанов, сократить издержки и повысить удовлетворенность клиентов.